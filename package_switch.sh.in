#!/bin/sh

# @file
# THIS FILE IS AUTOGENERATED.
# DO NOT EDIT.
#
# Either pass arguments to CMake, edit CMakeLists.txt, or edit package_switch.sh.

if [[ -z "$DEVKITPRO" ]]
then
      echo "Please set DEVKITPRO in your environment. export DEVKITPRO=<path to>/devkitpro"
fi

# Make nso.
echo "[ 25%] Building nso."
$DEVKITPRO/tools/bin/elf2nso @TARGET@.elf @TARGET@.nso

# Make pfs0 with exefs.
echo "[ 50%] Building pfs0."
mkdir -p exefs
[ -d @BUILD_EXEFS_SRC@ ] && cp -R @BUILD_EXEFS_SRC@/* exefs || echo > /dev/null
cp @TARGET@.nso exefs/main
$DEVKITPRO/tools/bin/build_pfs0 exefs @TARGET@.pfs0

# Make nacp.
echo "[ 75%] Building nacp."
$DEVKITPRO/tools/bin/nacptool --create @TARGET@ "@APP_AUTHOR@" "@APP_VERSION@" @TARGET@.nacp

# Make nro.
echo "[100%] Building nro."
$DEVKITPRO/tools/bin/elf2nro @TARGET@.elf @TARGET@.nro --icon=@APP_ICON@ --nacp=@TARGET@.nacp